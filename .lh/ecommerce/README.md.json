{
    "sourceFile": "ecommerce/README.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1768819805271,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1768819819082,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,258 +0,0 @@\n-# E-Commerce Application\r\n-\r\n-## Running the Project (IntelliJ)\r\n-\r\n-### Open project in IntelliJ\r\n-\r\n-Ensure Lombok plugin is installed + annotation processing enabled\r\n-\r\n-### Run:\r\n-`EcommerceApplication.java`\r\n-\r\n-Server runs at:\r\n-\r\n-```\r\n-http://localhost:8080\r\n-```\r\n-\r\n-## üîÅ Complete Order Flow (Business Logic)\r\n-Step-by-step flow:\r\n-\r\n-1. Create products\r\n-2. Add products to cart\r\n-3. View cart\r\n-4. Create order from cart\r\n-   - validate stock\r\n-   - calculate total\r\n-   - create order + order items\r\n-   - reduce product stock\r\n-   - clear cart\r\n-5. Create payment\r\n-   - payment created as PENDING\r\n-   - mock client waits 3 seconds then calls webhook\r\n-6. Webhook updates:\r\n-   - payment ‚Üí SUCCESS or FAILED\r\n-   - order ‚Üí PAID or FAILED\r\n-7. Get order to verify status\r\n-\r\n-## üìå API Documentation\r\n-\r\n-### ‚úÖ Product APIs\r\n-\r\n-#### 1) Create Product\r\n-\r\n-```\r\n-POST /api/products\r\n-```\r\n-\r\n-**Request:**\r\n-\r\n-```json\r\n-{\r\n-  \"name\": \"Laptop\",\r\n-  \"description\": \"Gaming Laptop\",\r\n-  \"price\": 50000.0,\r\n-  \"stock\": 10\r\n-}\r\n-```\r\n-\r\n-**Response:**\r\n-\r\n-```json\r\n-{\r\n-  \"id\": \"prod123\",\r\n-  \"name\": \"Laptop\",\r\n-  \"description\": \"Gaming Laptop\",\r\n-  \"price\": 50000.0,\r\n-  \"stock\": 10\r\n-}\r\n-```\r\n-\r\n-#### 2) Get All Products\r\n-\r\n-```\r\n-GET /api/products\r\n-```\r\n-\r\n-#### ‚≠ê Bonus: Search Products\r\n-\r\n-```\r\n-GET /api/products/search?q=laptop\r\n-```\r\n-\r\n-Returns products where name contains query string (case-insensitive).\r\n-\r\n-### ‚úÖ Cart APIs\r\n-\r\n-#### 1) Add to Cart\r\n-\r\n-```\r\n-POST /api/cart/add\r\n-```\r\n-\r\n-**Request:**\r\n-\r\n-```json\r\n-{\r\n-  \"userId\": \"user123\",\r\n-  \"productId\": \"prod123\",\r\n-  \"quantity\": 2\r\n-}\r\n-```\r\n-\r\n-#### 2) Get Cart of a User\r\n-\r\n-```\r\n-GET /api/cart/{userId}\r\n-```\r\n-\r\n-#### 3) Clear Cart\r\n-\r\n-```\r\n-DELETE /api/cart/{userId}/clear\r\n-```\r\n-\r\n-**Response:**\r\n-\r\n-```json\r\n-{\r\n-  \"message\": \"Cart cleared successfully\"\r\n-}\r\n-```\r\n-\r\n-### ‚úÖ Order APIs\r\n-\r\n-#### 1) Create Order from Cart\r\n-\r\n-```\r\n-POST /api/orders\r\n-```\r\n-\r\n-**Request:**\r\n-\r\n-```json\r\n-{\r\n-  \"userId\": \"user123\"\r\n-}\r\n-```\r\n-\r\n-**Response includes:**\r\n-\r\n-- orderId\r\n-- totalAmount\r\n-- status CREATED\r\n-- items\r\n-\r\n-#### 2) Get Order Details\r\n-\r\n-```\r\n-GET /api/orders/{orderId}\r\n-```\r\n-\r\n-Shows:\r\n-\r\n-- status (CREATED, PAID, etc.)\r\n-- payment details\r\n-- order items\r\n-\r\n-#### ‚≠ê Bonus: Order History\r\n-\r\n-```\r\n-GET /api/orders/user/{userId}\r\n-```\r\n-\r\n-Returns all orders for the user.\r\n-\r\n-#### ‚≠ê Bonus: Cancel Order (Restore Stock)\r\n-\r\n-```\r\n-POST /api/orders/{orderId}/cancel\r\n-```\r\n-\r\n-**Rules:**\r\n-\r\n-- Only cancels if order status is CREATED\r\n-- Restores product stock\r\n-- Updates order status to CANCELLED\r\n-\r\n-### ‚úÖ Payment APIs (Mock Integration)\r\n-\r\n-#### 1) Create Payment\r\n-\r\n-```\r\n-POST /api/payments/create\r\n-```\r\n-\r\n-**Request:**\r\n-\r\n-```json\r\n-{\r\n-  \"orderId\": \"order123\",\r\n-  \"amount\": 100000.0\r\n-}\r\n-```\r\n-\r\n-**Response:**\r\n-\r\n-```json\r\n-{\r\n-  \"id\": \"...\",\r\n-  \"orderId\": \"order123\",\r\n-  \"amount\": 100000.0,\r\n-  \"status\": \"PENDING\",\r\n-  \"paymentId\": \"pay_mock_xxx\"\r\n-}\r\n-```\r\n-\r\n-#### 2) Webhook Endpoint\r\n-\r\n-```\r\n-POST /api/webhooks/payment\r\n-```\r\n-\r\n-Mock payment service calls this automatically after 3 seconds.\r\n-\r\n-**Manual test example:**\r\n-\r\n-```json\r\n-{\r\n-  \"orderId\": \"order123\",\r\n-  \"status\": \"SUCCESS\",\r\n-  \"paymentId\": \"manual_1\"\r\n-}\r\n-```\r\n-\r\n-## üß™ Postman Testing Guide (Recommended Order)\r\n-\r\n-**Step 1:** Create products\r\n-- `POST /api/products` (3 times)\r\n-\r\n-**Step 2:** Add items to cart\r\n-- `POST /api/cart/add`\r\n-\r\n-**Step 3:** View cart\r\n-- `GET /api/cart/user123`\r\n-\r\n-**Step 4:** Create order\r\n-- `POST /api/orders`\r\n-- Copy orderId\r\n-\r\n-**Step 5:** Create payment\r\n-- `POST /api/payments/create`\r\n-- Wait 3 seconds\r\n-\r\n-**Step 6:** Get order status updated\r\n-- `GET /api/orders/{orderId}`\r\n-- Status should be PAID\r\n-\r\n-## ‚úÖ Sample Data\r\n-\r\n-**Products:**\r\n-\r\n-```json\r\n-[\r\n-  { \"name\": \"Laptop\", \"description\": \"Gaming Laptop\", \"price\": 50000.0, \"stock\": 10 },\r\n-  { \"name\": \"Mouse\", \"description\": \"Wireless Mouse\", \"price\": 1000.0, \"stock\": 50 },\r\n-  { \"name\": \"Keyboard\", \"description\": \"Mechanical Keyboard\", \"price\": 3000.0, \"stock\": 30 }\r\n-]\r\n-```\r\n\\ No newline at end of file\n"
                }
            ],
            "date": 1768819805271,
            "name": "Commit-0",
            "content": "# E-Commerce Application\r\n\r\n## Running the Project (IntelliJ)\r\n\r\n### Open project in IntelliJ\r\n\r\nEnsure Lombok plugin is installed + annotation processing enabled\r\n\r\n### Run:\r\n`EcommerceApplication.java`\r\n\r\nServer runs at:\r\n\r\n```\r\nhttp://localhost:8080\r\n```\r\n\r\n## üîÅ Complete Order Flow (Business Logic)\r\nStep-by-step flow:\r\n\r\n1. Create products\r\n2. Add products to cart\r\n3. View cart\r\n4. Create order from cart\r\n   - validate stock\r\n   - calculate total\r\n   - create order + order items\r\n   - reduce product stock\r\n   - clear cart\r\n5. Create payment\r\n   - payment created as PENDING\r\n   - mock client waits 3 seconds then calls webhook\r\n6. Webhook updates:\r\n   - payment ‚Üí SUCCESS or FAILED\r\n   - order ‚Üí PAID or FAILED\r\n7. Get order to verify status\r\n\r\n## üìå API Documentation\r\n\r\n### ‚úÖ Product APIs\r\n\r\n#### 1) Create Product\r\n\r\n```\r\nPOST /api/products\r\n```\r\n\r\n**Request:**\r\n\r\n```json\r\n{\r\n  \"name\": \"Laptop\",\r\n  \"description\": \"Gaming Laptop\",\r\n  \"price\": 50000.0,\r\n  \"stock\": 10\r\n}\r\n```\r\n\r\n**Response:**\r\n\r\n```json\r\n{\r\n  \"id\": \"prod123\",\r\n  \"name\": \"Laptop\",\r\n  \"description\": \"Gaming Laptop\",\r\n  \"price\": 50000.0,\r\n  \"stock\": 10\r\n}\r\n```\r\n\r\n#### 2) Get All Products\r\n\r\n```\r\nGET /api/products\r\n```\r\n\r\n#### ‚≠ê Bonus: Search Products\r\n\r\n```\r\nGET /api/products/search?q=laptop\r\n```\r\n\r\nReturns products where name contains query string (case-insensitive).\r\n\r\n### ‚úÖ Cart APIs\r\n\r\n#### 1) Add to Cart\r\n\r\n```\r\nPOST /api/cart/add\r\n```\r\n\r\n**Request:**\r\n\r\n```json\r\n{\r\n  \"userId\": \"user123\",\r\n  \"productId\": \"prod123\",\r\n  \"quantity\": 2\r\n}\r\n```\r\n\r\n#### 2) Get Cart of a User\r\n\r\n```\r\nGET /api/cart/{userId}\r\n```\r\n\r\n#### 3) Clear Cart\r\n\r\n```\r\nDELETE /api/cart/{userId}/clear\r\n```\r\n\r\n**Response:**\r\n\r\n```json\r\n{\r\n  \"message\": \"Cart cleared successfully\"\r\n}\r\n```\r\n\r\n### ‚úÖ Order APIs\r\n\r\n#### 1) Create Order from Cart\r\n\r\n```\r\nPOST /api/orders\r\n```\r\n\r\n**Request:**\r\n\r\n```json\r\n{\r\n  \"userId\": \"user123\"\r\n}\r\n```\r\n\r\n**Response includes:**\r\n\r\n- orderId\r\n- totalAmount\r\n- status CREATED\r\n- items\r\n\r\n#### 2) Get Order Details\r\n\r\n```\r\nGET /api/orders/{orderId}\r\n```\r\n\r\nShows:\r\n\r\n- status (CREATED, PAID, etc.)\r\n- payment details\r\n- order items\r\n\r\n#### ‚≠ê Bonus: Order History\r\n\r\n```\r\nGET /api/orders/user/{userId}\r\n```\r\n\r\nReturns all orders for the user.\r\n\r\n#### ‚≠ê Bonus: Cancel Order (Restore Stock)\r\n\r\n```\r\nPOST /api/orders/{orderId}/cancel\r\n```\r\n\r\n**Rules:**\r\n\r\n- Only cancels if order status is CREATED\r\n- Restores product stock\r\n- Updates order status to CANCELLED\r\n\r\n### ‚úÖ Payment APIs (Mock Integration)\r\n\r\n#### 1) Create Payment\r\n\r\n```\r\nPOST /api/payments/create\r\n```\r\n\r\n**Request:**\r\n\r\n```json\r\n{\r\n  \"orderId\": \"order123\",\r\n  \"amount\": 100000.0\r\n}\r\n```\r\n\r\n**Response:**\r\n\r\n```json\r\n{\r\n  \"id\": \"...\",\r\n  \"orderId\": \"order123\",\r\n  \"amount\": 100000.0,\r\n  \"status\": \"PENDING\",\r\n  \"paymentId\": \"pay_mock_xxx\"\r\n}\r\n```\r\n\r\n#### 2) Webhook Endpoint\r\n\r\n```\r\nPOST /api/webhooks/payment\r\n```\r\n\r\nMock payment service calls this automatically after 3 seconds.\r\n\r\n**Manual test example:**\r\n\r\n```json\r\n{\r\n  \"orderId\": \"order123\",\r\n  \"status\": \"SUCCESS\",\r\n  \"paymentId\": \"manual_1\"\r\n}\r\n```\r\n\r\n## üß™ Postman Testing Guide (Recommended Order)\r\n\r\n**Step 1:** Create products\r\n- `POST /api/products` (3 times)\r\n\r\n**Step 2:** Add items to cart\r\n- `POST /api/cart/add`\r\n\r\n**Step 3:** View cart\r\n- `GET /api/cart/user123`\r\n\r\n**Step 4:** Create order\r\n- `POST /api/orders`\r\n- Copy orderId\r\n\r\n**Step 5:** Create payment\r\n- `POST /api/payments/create`\r\n- Wait 3 seconds\r\n\r\n**Step 6:** Get order status updated\r\n- `GET /api/orders/{orderId}`\r\n- Status should be PAID\r\n\r\n## ‚úÖ Sample Data\r\n\r\n**Products:**\r\n\r\n```json\r\n[\r\n  { \"name\": \"Laptop\", \"description\": \"Gaming Laptop\", \"price\": 50000.0, \"stock\": 10 },\r\n  { \"name\": \"Mouse\", \"description\": \"Wireless Mouse\", \"price\": 1000.0, \"stock\": 50 },\r\n  { \"name\": \"Keyboard\", \"description\": \"Mechanical Keyboard\", \"price\": 3000.0, \"stock\": 30 }\r\n]\r\n```\r\n"
        }
    ]
}