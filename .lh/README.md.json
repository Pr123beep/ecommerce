{
    "sourceFile": "README.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1768819938991,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1768819945058,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,8 @@\n \r\n ---\r\n \r\n ## ğŸ“ Project Structure\r\n-ğŸ“ Project Structure\r\n \r\n com.example.ecommerce\r\n â”‚\r\n â”œâ”€â”€ controller\r\n"
                },
                {
                    "date": 1768819982579,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,8 +24,9 @@\n ---\r\n \r\n ## ğŸ“ Project Structure\r\n \r\n+\r\n com.example.ecommerce\r\n â”‚\r\n â”œâ”€â”€ controller\r\n â”‚   â”œâ”€â”€ ProductController.java\r\n"
                },
                {
                    "date": 1768819988297,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,63 +24,10 @@\n ---\r\n \r\n ## ğŸ“ Project Structure\r\n \r\n+https://hackmd.io/@HhG3fVhuQoisfsZZqjxPXA/rJg_hvor-g?stext=5555%3A891%3A0%3A1768819975%3Al4eQ_H\r\n \r\n-com.example.ecommerce\r\n-â”‚\r\n-â”œâ”€â”€ controller\r\n-â”‚   â”œâ”€â”€ ProductController.java\r\n-â”‚   â”œâ”€â”€ CartController.java\r\n-â”‚   â”œâ”€â”€ OrderController.java\r\n-â”‚   â””â”€â”€ PaymentController.java\r\n-â”‚\r\n-â”œâ”€â”€ service\r\n-â”‚   â”œâ”€â”€ ProductService.java\r\n-â”‚   â”œâ”€â”€ CartService.java\r\n-â”‚   â”œâ”€â”€ OrderService.java\r\n-â”‚   â””â”€â”€ PaymentService.java\r\n-â”‚\r\n-â”œâ”€â”€ repository\r\n-â”‚   â”œâ”€â”€ ProductRepository.java\r\n-â”‚   â”œâ”€â”€ CartRepository.java\r\n-â”‚   â”œâ”€â”€ OrderRepository.java\r\n-â”‚   â”œâ”€â”€ OrderItemRepository.java\r\n-â”‚   â””â”€â”€ PaymentRepository.java\r\n-â”‚\r\n-â”œâ”€â”€ model\r\n-â”‚   â”œâ”€â”€ User.java\r\n-â”‚   â”œâ”€â”€ Product.java\r\n-â”‚   â”œâ”€â”€ CartItem.java\r\n-â”‚   â”œâ”€â”€ Order.java\r\n-â”‚   â”œâ”€â”€ OrderItem.java\r\n-â”‚   â””â”€â”€ Payment.java\r\n-â”‚\r\n-â”œâ”€â”€ dto\r\n-â”‚   â”œâ”€â”€ AddToCartRequest.java\r\n-â”‚   â”œâ”€â”€ CreateOrderRequest.java\r\n-â”‚   â”œâ”€â”€ PaymentRequest.java\r\n-â”‚   â”œâ”€â”€ PaymentWebhookRequest.java\r\n-â”‚   â”œâ”€â”€ CartItemResponse.java\r\n-â”‚   â””â”€â”€ OrderResponse.java\r\n-â”‚\r\n-â”œâ”€â”€ webhook\r\n-â”‚   â””â”€â”€ PaymentWebhookController.java\r\n-â”‚\r\n-â”œâ”€â”€ client\r\n-â”‚   â””â”€â”€ MockPaymentServiceClient.java\r\n-â”‚\r\n-â”œâ”€â”€ config\r\n-â”‚   â””â”€â”€ RestTemplateConfig.java\r\n-â”‚\r\n-â”œâ”€â”€ exception\r\n-â”‚   â”œâ”€â”€ BadRequestException.java\r\n-â”‚   â”œâ”€â”€ NotFoundException.java\r\n-â”‚   â””â”€â”€ GlobalExceptionHandler.java\r\n-â”‚\r\n-â””â”€â”€ EcommerceApplication.java\r\n-\r\n-\r\n ---\r\n \r\n ## ğŸ§  Database Schema (ER Summary)\r\n \r\n"
                },
                {
                    "date": 1768819993937,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,10 +24,10 @@\n ---\r\n \r\n ## ğŸ“ Project Structure\r\n \r\n-https://hackmd.io/@HhG3fVhuQoisfsZZqjxPXA/rJg_hvor-g?stext=5555%3A891%3A0%3A1768819975%3Al4eQ_H\r\n \r\n+\r\n ---\r\n \r\n ## ğŸ§  Database Schema (ER Summary)\r\n \r\n"
                },
                {
                    "date": 1768820009478,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,10 +24,10 @@\n ---\r\n \r\n ## ğŸ“ Project Structure\r\n \r\n+![alt text](image.png)\r\n \r\n-\r\n ---\r\n \r\n ## ğŸ§  Database Schema (ER Summary)\r\n \r\n"
                },
                {
                    "date": 1768820036559,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n ---\r\n \r\n ## ğŸ“ Project Structure\r\n \r\n-![alt text](image.png)\r\n+![project structure](image.png)\r\n \r\n ---\r\n \r\n ## ğŸ§  Database Schema (ER Summary)\r\n"
                }
            ],
            "date": 1768819938991,
            "name": "Commit-0",
            "content": "# ğŸ›’ Minimal E-Commerce Backend API (Spring Boot + MongoDB) â€” Assignment Submission\r\n\r\nThis project is a minimal e-commerce backend built using **Spring Boot** and **MongoDB**, covering the full flow:\r\n\r\nâœ… Products can be created and listed  \r\nâœ… Users can add items to cart / view cart / clear cart  \r\nâœ… Orders can be created from cart  \r\nâœ… Payments can be initiated (Mock payment service)  \r\nâœ… Payment webhook updates payment + order status  \r\nâœ… Bonus APIs: Order history, Order cancellation, Product search  \r\nâœ… Tested using Postman (collection can be exported for submission)\r\n\r\n---\r\n\r\n## ğŸ“Œ Tech Stack\r\n- Java **21**\r\n- Spring Boot **3.3.x**\r\n- Spring Web\r\n- Spring Data MongoDB\r\n- Bean Validation\r\n- Lombok\r\n- MongoDB (Local OR Atlas)\r\n\r\n---\r\n\r\n## ğŸ“ Project Structure\r\nğŸ“ Project Structure\r\n\r\ncom.example.ecommerce\r\nâ”‚\r\nâ”œâ”€â”€ controller\r\nâ”‚   â”œâ”€â”€ ProductController.java\r\nâ”‚   â”œâ”€â”€ CartController.java\r\nâ”‚   â”œâ”€â”€ OrderController.java\r\nâ”‚   â””â”€â”€ PaymentController.java\r\nâ”‚\r\nâ”œâ”€â”€ service\r\nâ”‚   â”œâ”€â”€ ProductService.java\r\nâ”‚   â”œâ”€â”€ CartService.java\r\nâ”‚   â”œâ”€â”€ OrderService.java\r\nâ”‚   â””â”€â”€ PaymentService.java\r\nâ”‚\r\nâ”œâ”€â”€ repository\r\nâ”‚   â”œâ”€â”€ ProductRepository.java\r\nâ”‚   â”œâ”€â”€ CartRepository.java\r\nâ”‚   â”œâ”€â”€ OrderRepository.java\r\nâ”‚   â”œâ”€â”€ OrderItemRepository.java\r\nâ”‚   â””â”€â”€ PaymentRepository.java\r\nâ”‚\r\nâ”œâ”€â”€ model\r\nâ”‚   â”œâ”€â”€ User.java\r\nâ”‚   â”œâ”€â”€ Product.java\r\nâ”‚   â”œâ”€â”€ CartItem.java\r\nâ”‚   â”œâ”€â”€ Order.java\r\nâ”‚   â”œâ”€â”€ OrderItem.java\r\nâ”‚   â””â”€â”€ Payment.java\r\nâ”‚\r\nâ”œâ”€â”€ dto\r\nâ”‚   â”œâ”€â”€ AddToCartRequest.java\r\nâ”‚   â”œâ”€â”€ CreateOrderRequest.java\r\nâ”‚   â”œâ”€â”€ PaymentRequest.java\r\nâ”‚   â”œâ”€â”€ PaymentWebhookRequest.java\r\nâ”‚   â”œâ”€â”€ CartItemResponse.java\r\nâ”‚   â””â”€â”€ OrderResponse.java\r\nâ”‚\r\nâ”œâ”€â”€ webhook\r\nâ”‚   â””â”€â”€ PaymentWebhookController.java\r\nâ”‚\r\nâ”œâ”€â”€ client\r\nâ”‚   â””â”€â”€ MockPaymentServiceClient.java\r\nâ”‚\r\nâ”œâ”€â”€ config\r\nâ”‚   â””â”€â”€ RestTemplateConfig.java\r\nâ”‚\r\nâ”œâ”€â”€ exception\r\nâ”‚   â”œâ”€â”€ BadRequestException.java\r\nâ”‚   â”œâ”€â”€ NotFoundException.java\r\nâ”‚   â””â”€â”€ GlobalExceptionHandler.java\r\nâ”‚\r\nâ””â”€â”€ EcommerceApplication.java\r\n\r\n\r\n---\r\n\r\n## ğŸ§  Database Schema (ER Summary)\r\n\r\n- **USER** â†’ CART_ITEM (1:N)\r\n- **USER** â†’ ORDER (1:N)\r\n- **ORDER** â†’ ORDER_ITEM (1:N)\r\n- **ORDER** â†’ PAYMENT (1:1)\r\n- **PRODUCT** used in CART_ITEM and ORDER_ITEM\r\n\r\nMongo collections:\r\n- `products`\r\n- `cart_items`\r\n- `orders`\r\n- `order_items`\r\n- `payments`\r\n- `users` (optional)\r\n\r\n---\r\n\r\n## âš™ï¸ Prerequisites\r\n- IntelliJ IDEA\r\n- Java 21\r\n- Maven\r\n- MongoDB (local or cloud)\r\n\r\n---\r\n\r\n# âœ… MongoDB Setup\r\n\r\n## Option 1: Local MongoDB (Recommended)\r\nIf you already have MongoDB installed locally, ensure it is running on: localhost:27017\r\n\r\n\r\n### Confirm connection\r\nOpen IntelliJ run logs, you should see: successfully connected to server localhost:27017\r\n\r\n\r\n---\r\n\r\n## Option 2: MongoDB Atlas (Cloud)\r\n1. Create cluster on MongoDB Atlas (Free M0)\r\n2. Allow your IP in **Network Access**\r\n3. Create DB user/password\r\n4. Copy connection string and update `application.yml`\r\n\r\nExample:\r\n```yaml\r\nspring:\r\n  data:\r\n    mongodb:\r\n      uri: mongodb+srv://username:password@cluster0.mongodb.net/ecommerce_db?retryWrites=true&w=majority\r\n\r\n\r\n# E-Commerce Application\r\n\r\n## Running the Project (IntelliJ)\r\n\r\n### Open project in IntelliJ\r\n\r\nEnsure Lombok plugin is installed + annotation processing enabled\r\n\r\n### Run:\r\n`EcommerceApplication.java`\r\n\r\nServer runs at:\r\n\r\n```\r\nhttp://localhost:8080\r\n```\r\n\r\n## ğŸ” Complete Order Flow (Business Logic)\r\nStep-by-step flow:\r\n\r\n1. Create products\r\n2. Add products to cart\r\n3. View cart\r\n4. Create order from cart\r\n   - validate stock\r\n   - calculate total\r\n   - create order + order items\r\n   - reduce product stock\r\n   - clear cart\r\n5. Create payment\r\n   - payment created as PENDING\r\n   - mock client waits 3 seconds then calls webhook\r\n6. Webhook updates:\r\n   - payment â†’ SUCCESS or FAILED\r\n   - order â†’ PAID or FAILED\r\n7. Get order to verify status\r\n\r\n## ğŸ“Œ API Documentation\r\n\r\n### âœ… Product APIs\r\n\r\n#### 1) Create Product\r\n\r\n```\r\nPOST /api/products\r\n```\r\n\r\n**Request:**\r\n\r\n```json\r\n{\r\n  \"name\": \"Laptop\",\r\n  \"description\": \"Gaming Laptop\",\r\n  \"price\": 50000.0,\r\n  \"stock\": 10\r\n}\r\n```\r\n\r\n**Response:**\r\n\r\n```json\r\n{\r\n  \"id\": \"prod123\",\r\n  \"name\": \"Laptop\",\r\n  \"description\": \"Gaming Laptop\",\r\n  \"price\": 50000.0,\r\n  \"stock\": 10\r\n}\r\n```\r\n\r\n#### 2) Get All Products\r\n\r\n```\r\nGET /api/products\r\n```\r\n\r\n#### â­ Bonus: Search Products\r\n\r\n```\r\nGET /api/products/search?q=laptop\r\n```\r\n\r\nReturns products where name contains query string (case-insensitive).\r\n\r\n### âœ… Cart APIs\r\n\r\n#### 1) Add to Cart\r\n\r\n```\r\nPOST /api/cart/add\r\n```\r\n\r\n**Request:**\r\n\r\n```json\r\n{\r\n  \"userId\": \"user123\",\r\n  \"productId\": \"prod123\",\r\n  \"quantity\": 2\r\n}\r\n```\r\n\r\n#### 2) Get Cart of a User\r\n\r\n```\r\nGET /api/cart/{userId}\r\n```\r\n\r\n#### 3) Clear Cart\r\n\r\n```\r\nDELETE /api/cart/{userId}/clear\r\n```\r\n\r\n**Response:**\r\n\r\n```json\r\n{\r\n  \"message\": \"Cart cleared successfully\"\r\n}\r\n```\r\n\r\n### âœ… Order APIs\r\n\r\n#### 1) Create Order from Cart\r\n\r\n```\r\nPOST /api/orders\r\n```\r\n\r\n**Request:**\r\n\r\n```json\r\n{\r\n  \"userId\": \"user123\"\r\n}\r\n```\r\n\r\n**Response includes:**\r\n\r\n- orderId\r\n- totalAmount\r\n- status CREATED\r\n- items\r\n\r\n#### 2) Get Order Details\r\n\r\n```\r\nGET /api/orders/{orderId}\r\n```\r\n\r\nShows:\r\n\r\n- status (CREATED, PAID, etc.)\r\n- payment details\r\n- order items\r\n\r\n#### â­ Bonus: Order History\r\n\r\n```\r\nGET /api/orders/user/{userId}\r\n```\r\n\r\nReturns all orders for the user.\r\n\r\n#### â­ Bonus: Cancel Order (Restore Stock)\r\n\r\n```\r\nPOST /api/orders/{orderId}/cancel\r\n```\r\n\r\n**Rules:**\r\n\r\n- Only cancels if order status is CREATED\r\n- Restores product stock\r\n- Updates order status to CANCELLED\r\n\r\n### âœ… Payment APIs (Mock Integration)\r\n\r\n#### 1) Create Payment\r\n\r\n```\r\nPOST /api/payments/create\r\n```\r\n\r\n**Request:**\r\n\r\n```json\r\n{\r\n  \"orderId\": \"order123\",\r\n  \"amount\": 100000.0\r\n}\r\n```\r\n\r\n**Response:**\r\n\r\n```json\r\n{\r\n  \"id\": \"...\",\r\n  \"orderId\": \"order123\",\r\n  \"amount\": 100000.0,\r\n  \"status\": \"PENDING\",\r\n  \"paymentId\": \"pay_mock_xxx\"\r\n}\r\n```\r\n\r\n#### 2) Webhook Endpoint\r\n\r\n```\r\nPOST /api/webhooks/payment\r\n```\r\n\r\nMock payment service calls this automatically after 3 seconds.\r\n\r\n**Manual test example:**\r\n\r\n```json\r\n{\r\n  \"orderId\": \"order123\",\r\n  \"status\": \"SUCCESS\",\r\n  \"paymentId\": \"manual_1\"\r\n}\r\n```\r\n\r\n## ğŸ§ª Postman Testing Guide (Recommended Order)\r\n\r\n**Step 1:** Create products\r\n- `POST /api/products` (3 times)\r\n\r\n**Step 2:** Add items to cart\r\n- `POST /api/cart/add`\r\n\r\n**Step 3:** View cart\r\n- `GET /api/cart/user123`\r\n\r\n**Step 4:** Create order\r\n- `POST /api/orders`\r\n- Copy orderId\r\n\r\n**Step 5:** Create payment\r\n- `POST /api/payments/create`\r\n- Wait 3 seconds\r\n\r\n**Step 6:** Get order status updated\r\n- `GET /api/orders/{orderId}`\r\n- Status should be PAID\r\n\r\n## âœ… Sample Data\r\n\r\n**Products:**\r\n\r\n```json\r\n[\r\n  { \"name\": \"Laptop\", \"description\": \"Gaming Laptop\", \"price\": 50000.0, \"stock\": 10 },\r\n  { \"name\": \"Mouse\", \"description\": \"Wireless Mouse\", \"price\": 1000.0, \"stock\": 50 },\r\n  { \"name\": \"Keyboard\", \"description\": \"Mechanical Keyboard\", \"price\": 3000.0, \"stock\": 30 }\r\n]\r\n```\r\n\r\n\r\n"
        }
    ]
}